{"ast":null,"code":"import _slicedToArray from\"/media/psf/Home/Desktop/CS4550-FinalProject/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Row,Col,Form,Button}from'react-bootstrap';import{connect}from'react-redux';import{useState}from'react';import{useHistory,NavLink,useLocation}from'react-router-dom';import pick from'lodash/pick';import store from'../store';import{fetch_food,update_food,fetch_foods,fetch_users,fetch_user}from'../api';//referenced from lecture code SPA Structure from Nat Tuck CS4550 Northeastern University \nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function FoodNew(_ref){var session=_ref.session,food_form=_ref.food_form,user_form=_ref.user_form;var location=useLocation();var history=useHistory();var food_id=location.pathname.split(\"/food/edit/\")[1];if(typeof food_form.id==\"undefined\"||food_form.id!=food_id){fetch_foods();fetch_food(food_id);}if(typeof user_form.id==\"undefined\"||user_form.id!=food_form.user_id){fetch_foods();fetch_user(food_form.user_id);}var _useState=useState({user_id:session.user_id,body:food_form.body,brand:food_form.brand,price:food_form.price,type:food_form.type,id:food_form.id}),_useState2=_slicedToArray(_useState,2),food=_useState2[0],setFood=_useState2[1];function onSubmit(ev){ev.preventDefault();var data=pick(food,['id','user_id','body','type','brand',\"photo\",\"price\"]);update_food(data).then(function(data){if(data.error){var action={type:\"error/set\",data:data.error};store.dispatch(action);}else{fetch_foods();fetch_users();history.push(\"/food/list\");}});}function update(field,ev){var u1=Object.assign({},food);u1[field]=ev.target.value;setFood(u1);}function updatePhoto(ev){var p1=Object.assign({},food);p1[\"photo\"]=ev.target.files[0];setFood(p1);console.log(food);}return/*#__PURE__*/_jsxs(Form,{onSubmit:onSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mt-5\",children:\"Edit Food Recommendation\"}),/*#__PURE__*/_jsx(Form.Label,{children:\"Product Brand\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",onChange:function onChange(ev){return update(\"brand\",ev);},value:food.brand})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Product Image\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"file\",onChange:updatePhoto})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Product Description\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"textarea\",onChange:function onChange(ev){return update(\"body\",ev);},value:food.body})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"formBasicRange\",children:[/*#__PURE__*/_jsxs(Form.Label,{children:[\"Product Price: \",food.price,\"$ per lbs\"]}),/*#__PURE__*/_jsx(Form.Control,{type:\"range\",onChange:function onChange(ev){return update(\"price\",ev);},value:food.price})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"exampleForm.ControlSelect1\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Product Type\"}),/*#__PURE__*/_jsxs(Form.Control,{as:\"select\",onChange:function onChange(ev){return update(\"type\",ev);},value:food.type,children:[/*#__PURE__*/_jsx(\"option\",{}),/*#__PURE__*/_jsx(\"option\",{children:\"Kitten Food\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Adult Food\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Wet Food\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Dried Food\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Semi-moist Food\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Other\"})]})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",className:\"h3 font-weight-bold mr-3\",children:\"Save\"})]});}function state2props(_ref2){var session=_ref2.session,food_form=_ref2.food_form,user_form=_ref2.user_form;return{session:session,food_form:food_form,user_form:user_form};}export default connect(state2props)(FoodNew);","map":{"version":3,"sources":["/media/psf/Home/Desktop/CS4550-FinalProject/web/src/Food/Edit.js"],"names":["Row","Col","Form","Button","connect","useState","useHistory","NavLink","useLocation","pick","store","fetch_food","update_food","fetch_foods","fetch_users","fetch_user","FoodNew","session","food_form","user_form","location","history","food_id","pathname","split","id","user_id","body","brand","price","type","food","setFood","onSubmit","ev","preventDefault","data","then","error","action","dispatch","push","update","field","u1","Object","assign","target","value","updatePhoto","p1","files","console","log","state2props"],"mappings":"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","sourcesContent":["import { Row, Col, Form, Button} from 'react-bootstrap';\nimport { connect } from 'react-redux';\nimport { useState } from 'react';\nimport { useHistory, NavLink, useLocation  } from 'react-router-dom';\nimport pick from 'lodash/pick';\nimport store from '../store';\nimport { fetch_food, update_food , fetch_foods, fetch_users, fetch_user} from '../api';\n\n//referenced from lecture code SPA Structure from Nat Tuck CS4550 Northeastern University \nfunction FoodNew({session, food_form, user_form}) {\n  let location = useLocation()\n  let history = useHistory()\n  let food_id = location.pathname.split(\"/food/edit/\")[1]\n\n  if(typeof(food_form.id) == \"undefined\" || food_form.id != food_id) {\n    fetch_foods()\n    fetch_food(food_id)\n  }\n\n  if(typeof(user_form.id) == \"undefined\" || user_form.id != food_form.user_id){\n    fetch_foods()\n    fetch_user(food_form.user_id)\n  }\n\n  const [food, setFood] = useState({\n    user_id: session.user_id, body: food_form.body, brand: food_form.brand, price: food_form.price,\n    type: food_form.type, id: food_form.id\n  })\n\n  function onSubmit(ev) {\n    ev.preventDefault();\n    let data = pick(food, ['id', 'user_id', 'body', 'type', 'brand',\n    \"photo\", \"price\"]);\n    update_food(data).then((data) => {\n        if(data.error) {\n          let action={\n            type:\"error/set\",\n            data: data.error\n          }\n          store.dispatch(action)\n        }\n        else {\n          fetch_foods()\n          fetch_users()\n          history.push(\"/food/list\")\n        }\n    });\n  }\n  function update(field, ev) {\n    let u1 = Object.assign({}, food);\n    u1[field] = ev.target.value;\n    setFood(u1);\n  }\n\n  function updatePhoto(ev) {\n    let p1 = Object.assign({}, food);\n    p1[\"photo\"] = ev.target.files[0];\n    setFood(p1);\n    console.log(food)\n  }\n\n  return(\n      <Form onSubmit={onSubmit}>\n        <Form.Group>\n          <h1 className=\"mt-5\">Edit Food Recommendation</h1>\n          <Form.Label>Product Brand</Form.Label>\n          <Form.Control type=\"text\"\n                        onChange={\n                          (ev) => update(\"brand\", ev)}\n            value={food.brand} />\n        </Form.Group>\n        <Form.Group>\n              <Form.Label>Product Image</Form.Label>\n              <Form.Control type=\"file\" onChange={updatePhoto} />\n        </Form.Group>\n        <Form.Group>\n          <Form.Label>Product Description</Form.Label>\n          <Form.Control type=\"textarea\"\n                        onChange={\n                          (ev) => update(\"body\", ev)}\n            value={food.body} />\n        </Form.Group>\n        <Form.Group controlId=\"formBasicRange\">\n          <Form.Label>Product Price: {food.price}$ per lbs</Form.Label>\n          <Form.Control type=\"range\" onChange={(ev) => update(\"price\", ev)} value={food.price}/>\n        </Form.Group>\n        <Form.Group controlId=\"exampleForm.ControlSelect1\">\n          <Form.Label>Product Type</Form.Label>\n          <Form.Control as=\"select\" onChange={(ev) => update(\"type\", ev)} value={food.type}>\n            <option></option>\n            <option>Kitten Food</option>\n            <option>Adult Food</option>\n            <option>Wet Food</option>\n            <option>Dried Food</option>\n            <option>Semi-moist Food</option>\n            <option>Other</option>\n          </Form.Control>\n        </Form.Group>\n        <Button variant=\"primary\" type=\"submit\" className=\"h3 font-weight-bold mr-3\">\n          Save\n        </Button>\n      </Form>\n    );\n}\n\nfunction state2props({session, food_form, user_form}) {\n  return {session, food_form, user_form};\n}\n\nexport default connect(state2props)(FoodNew);\n"]},"metadata":{},"sourceType":"module"}