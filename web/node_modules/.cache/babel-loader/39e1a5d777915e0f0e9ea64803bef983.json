{"ast":null,"code":"import _slicedToArray from\"/media/psf/Home/Desktop/CS4550-FinalProject/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Nav,NavRow,Row,Col,Form,Button}from'react-bootstrap';import{connect}from'react-redux';import{useState}from'react';import{useHistory,NavLink,useLocation}from'react-router-dom';import pick from'lodash/pick';import store from'../store';import{update_forum,fetch_forums,fetch_user,fetch_forum}from'../api';//referenced from lecture code SPA Structure from Nat Tuck CS4550 Northeastern University\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ForumEdit(_ref){var user_form=_ref.user_form,session=_ref.session,forum_form=_ref.forum_form;var location=useLocation();var forum_id=location.pathname.split(\"/forum/edit/\")[1];if(typeof forum_form.id==\"undefined\"||forum_form.id!=forum_id){fetch_forum(forum_id);}if(typeof user_form.id==\"undefined\"||user_form.id!=forum_form.user_id){fetch_user(forum_form.user_id);}var history=useHistory();var _useState=useState({user_id:user_form.id,body:forum_form.body,title:forum_form.title,id:forum_form.id,votes:forum_form.votes}),_useState2=_slicedToArray(_useState,2),post=_useState2[0],setPost=_useState2[1];function onSubmit(ev){ev.preventDefault();var data=pick(post,['user_id','title','body','photo','id']);update_forum(data).then(function(data){if(data.error){var action={type:\"error/set\",data:data.error};store.dispatch(action);}else{fetch_forums();fetch_forum(forum_form.id);var _link=\"/forum/view/\"+forum_form.id;history.push(_link);}});}function update(field,ev){var u1=Object.assign({},post);u1[field]=ev.target.value;setPost(u1);}function updatePhoto(ev){var p1=Object.assign({},post);p1[\"photo\"]=ev.target.files[0];setPost(p1);}function Redirect(_ref2){var to=_ref2.to,children=_ref2.children;return/*#__PURE__*/_jsx(Nav.Item,{children:/*#__PURE__*/_jsx(NavLink,{to:to,exact:true,className:\"btn font-weight-bold text-light btn-danger\",activeClassName:\"active\",children:children})});}var link=\"/forum/view/\"+forum_form.id;if(session){return/*#__PURE__*/_jsxs(Form,{onSubmit:onSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mt-5\",children:\"Edit Forum Post\"}),/*#__PURE__*/_jsx(Form.Label,{children:\"Post Title\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",onChange:function onChange(ev){return update(\"title\",ev);},value:post.title})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Forum Text\"}),/*#__PURE__*/_jsx(Form.Control,{as:\"textarea\",onChange:function onChange(ev){return update(\"body\",ev);},value:post.body})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Profile Picture\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"file\",onChange:updatePhoto})]}),/*#__PURE__*/_jsxs(Row,{className:\"ml-1\",children:[/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",className:\"h3 font-weight-bold mr-3\",children:\"Save\"}),/*#__PURE__*/_jsx(Redirect,{to:link,children:\"Cancel\"})]})]});}else{return/*#__PURE__*/_jsx(\"h1\",{className:\"mt-5 ml-5\",children:\"Please Login In To Edit\"});}}function state2props(_ref3){var user_form=_ref3.user_form,session=_ref3.session,forum_form=_ref3.forum_form;return{user_form:user_form,session:session,forum_form:forum_form};}export default connect(state2props)(ForumEdit);","map":{"version":3,"sources":["/media/psf/Home/Desktop/CS4550-FinalProject/web/src/Forum/Edit.js"],"names":["Nav","NavRow","Row","Col","Form","Button","connect","useState","useHistory","NavLink","useLocation","pick","store","update_forum","fetch_forums","fetch_user","fetch_forum","ForumEdit","user_form","session","forum_form","location","forum_id","pathname","split","id","user_id","history","body","title","votes","post","setPost","onSubmit","ev","preventDefault","data","then","error","action","type","dispatch","link","push","update","field","u1","Object","assign","target","value","updatePhoto","p1","files","Redirect","to","children","state2props"],"mappings":"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","sourcesContent":["import { Nav, NavRow, Row, Col, Form, Button } from 'react-bootstrap';\nimport { connect } from 'react-redux';\nimport { useState } from 'react';\nimport { useHistory, NavLink, useLocation  } from 'react-router-dom';\nimport pick from 'lodash/pick';\nimport store from '../store';\nimport { update_forum , fetch_forums, fetch_user, fetch_forum } from '../api';\n\n//referenced from lecture code SPA Structure from Nat Tuck CS4550 Northeastern University\nfunction ForumEdit({user_form, session, forum_form}) {\n  let location = useLocation()\n  let forum_id = location.pathname.split(\"/forum/edit/\")[1]\n  if(typeof(forum_form.id) == \"undefined\" || forum_form.id != forum_id) {\n    fetch_forum(forum_id)\n  }\n  if(typeof(user_form.id) == \"undefined\" || user_form.id != forum_form.user_id) {\n    fetch_user(forum_form.user_id)\n  }\n\n  let history = useHistory();\n  const [post, setPost] = useState({\n    user_id: user_form.id, body: forum_form.body, title: forum_form.title, id: forum_form.id,\n    votes: forum_form.votes\n  });\n\n  function onSubmit(ev) {\n    ev.preventDefault();\n    let data = pick(post, ['user_id', 'title', 'body', 'photo', 'id']);\n    update_forum(data).then((data) => {\n        if(data.error) {\n          let action={\n            type:\"error/set\",\n            data: data.error\n          }\n          store.dispatch(action)\n        }\n        else {\n          fetch_forums()\n          fetch_forum(forum_form.id)\n          let link = \"/forum/view/\" + forum_form.id\n          history.push(link)\n        }\n    });\n  }\n\n  function update(field, ev) {\n    let u1 = Object.assign({}, post);\n    u1[field] = ev.target.value;\n    setPost(u1);\n  }\n\n  function updatePhoto(ev) {\n    let p1 = Object.assign({}, post);\n    p1[\"photo\"] = ev.target.files[0];\n    setPost(p1);\n  }\n\n  function Redirect({to, children}) {\n    return (\n      <Nav.Item>\n        <NavLink to={to} exact\n          className=\"btn font-weight-bold text-light btn-danger\"\n          activeClassName=\"active\">\n          {children}\n        </NavLink>\n      </Nav.Item>\n    );\n  }\n  let link = \"/forum/view/\" + forum_form.id\n\n  if(session) {\n    return(\n        <Form onSubmit={onSubmit}>\n          <Form.Group>\n            <h1 className=\"mt-5\">Edit Forum Post</h1>\n            <Form.Label>Post Title</Form.Label>\n            <Form.Control type=\"text\"\n                          onChange={(ev) => update(\"title\", ev)}\n              value={post.title} />\n          </Form.Group>\n          <Form.Group>\n          <Form.Label>Forum Text</Form.Label>\n          <Form.Control as=\"textarea\"\n                        onChange={\n                          (ev) => update(\"body\", ev)}\n            value={post.body} />\n        </Form.Group>\n        <Form.Group>\n              <Form.Label>Profile Picture</Form.Label>\n              <Form.Control type=\"file\" onChange={updatePhoto} />\n        </Form.Group>\n          <Row className=\"ml-1\">\n          <Button variant=\"primary\" type=\"submit\" className=\"h3 font-weight-bold mr-3\">\n            Save\n          </Button>\n          <Redirect to={link}>Cancel</Redirect>\n          </Row>\n        </Form>\n      );\n  }\n  else{\n    return <h1 className=\"mt-5 ml-5\">Please Login In To Edit</h1>\n  }\n}\n\nfunction state2props({user_form, session, forum_form}) {\n  return {user_form, session, forum_form};\n}\n\nexport default connect(state2props)(ForumEdit);\n"]},"metadata":{},"sourceType":"module"}