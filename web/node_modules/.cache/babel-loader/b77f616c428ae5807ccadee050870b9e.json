{"ast":null,"code":"import _slicedToArray from\"/media/psf/Home/Desktop/CS4550-FinalProject/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Nav,NavRow,Row,Col,Form,Button}from'react-bootstrap';import{connect}from'react-redux';import{useState}from'react';import{useHistory,NavLink,useLocation}from'react-router-dom';import pick from'lodash/pick';import store from'../store';import{update_wellness,fetch_wellness,fetch_user,fetch_single_wellness}from'../api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function WellnessEdit(_ref){var user_form=_ref.user_form,session=_ref.session,wellness_form=_ref.wellness_form;var location=useLocation();var wellness_id=location.pathname.split(\"/wellness/edit/\")[1];if(typeof wellness_form.id==\"undefined\"||wellness_form.id!=wellness_id){fetch_single_wellness(wellness_id);}if(typeof user_form.id==\"undefined\"||user_form.id!=wellness_form.user_id){fetch_user(wellness_form.user_id);}var history=useHistory();var _useState=useState({user_id:user_form.id,body:wellness_form.body,title:wellness_form.title,id:wellness_form.id,votes:wellness_form.votes}),_useState2=_slicedToArray(_useState,2),post=_useState2[0],setPost=_useState2[1];function onSubmit(ev){ev.preventDefault();var data=pick(post,['user_id','title','body','photo','id']);update_wellness(data).then(function(data){if(data.error){var action={type:\"error/set\",data:data.error};store.dispatch(action);}else{fetch_wellness();fetch_single_wellness(wellness_form.id);var _link=\"/wellness/view/\"+wellness_form.id;history.push(_link);}});}function update(field,ev){var u1=Object.assign({},post);u1[field]=ev.target.value;setPost(u1);}function updatePhoto(ev){var p1=Object.assign({},post);p1[\"photo\"]=ev.target.files[0];setPost(p1);}function Redirect(_ref2){var to=_ref2.to,children=_ref2.children;return/*#__PURE__*/_jsx(Nav.Item,{children:/*#__PURE__*/_jsx(NavLink,{to:to,exact:true,className:\"btn font-weight-bold text-light btn-danger\",activeClassName:\"active\",children:children})});}var link=\"/wellness/view/\"+wellness_form.id;if(session){return/*#__PURE__*/_jsxs(Form,{onSubmit:onSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mt-5\",children:\"Edit Wellness Post\"}),/*#__PURE__*/_jsx(Form.Label,{children:\"Post Title\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",onChange:function onChange(ev){return update(\"title\",ev);},value:post.title})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Post Body\"}),/*#__PURE__*/_jsx(Form.Control,{as:\"textarea\",onChange:function onChange(ev){return update(\"body\",ev);},value:post.body})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Profile Picture\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"file\",onChange:updatePhoto})]}),/*#__PURE__*/_jsxs(Row,{className:\"ml-1\",children:[/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",className:\"h3 font-weight-bold mr-3\",children:\"Save\"}),/*#__PURE__*/_jsx(Redirect,{to:link,children:\"Cancel\"})]})]});}else{return/*#__PURE__*/_jsx(\"h1\",{className:\"mt-5 ml-5\",children:\"Please Login In To Edit\"});}}function state2props(_ref3){var user_form=_ref3.user_form,session=_ref3.session,wellness_form=_ref3.wellness_form;return{user_form:user_form,session:session,wellness_form:wellness_form};}export default connect(state2props)(WellnessEdit);","map":{"version":3,"sources":["/media/psf/Home/Desktop/CS4550-FinalProject/web/src/Wellness/Edit.js"],"names":["Nav","NavRow","Row","Col","Form","Button","connect","useState","useHistory","NavLink","useLocation","pick","store","update_wellness","fetch_wellness","fetch_user","fetch_single_wellness","WellnessEdit","user_form","session","wellness_form","location","wellness_id","pathname","split","id","user_id","history","body","title","votes","post","setPost","onSubmit","ev","preventDefault","data","then","error","action","type","dispatch","link","push","update","field","u1","Object","assign","target","value","updatePhoto","p1","files","Redirect","to","children","state2props"],"mappings":"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","sourcesContent":["import { Nav, NavRow, Row, Col, Form, Button } from 'react-bootstrap';\nimport { connect } from 'react-redux';\nimport { useState } from 'react';\nimport { useHistory, NavLink, useLocation  } from 'react-router-dom';\nimport pick from 'lodash/pick';\nimport store from '../store';\nimport { update_wellness , fetch_wellness, fetch_user, fetch_single_wellness } from '../api';\n\n\nfunction WellnessEdit({user_form, session, wellness_form}) {\n  let location = useLocation()\n  let wellness_id = location.pathname.split(\"/wellness/edit/\")[1]\n  if(typeof(wellness_form.id) == \"undefined\" || wellness_form.id != wellness_id) {\n    fetch_single_wellness(wellness_id)\n  }\n  if(typeof(user_form.id) == \"undefined\" || user_form.id != wellness_form.user_id) {\n    fetch_user(wellness_form.user_id)\n  }\n\n  let history = useHistory();\n  const [post, setPost] = useState({\n    user_id: user_form.id, body: wellness_form.body, title: wellness_form.title, id: wellness_form.id,\n    votes: wellness_form.votes\n  });\n\n  function onSubmit(ev) {\n    ev.preventDefault();\n    let data = pick(post, ['user_id', 'title', 'body', 'photo', 'id']);\n    update_wellness(data).then((data) => {\n        if(data.error) {\n          let action={\n            type:\"error/set\",\n            data: data.error\n          }\n          store.dispatch(action)\n        }\n        else {\n          fetch_wellness()\n          fetch_single_wellness(wellness_form.id)\n          let link = \"/wellness/view/\" + wellness_form.id\n          history.push(link)\n        }\n    });\n  }\n\n  function update(field, ev) {\n    let u1 = Object.assign({}, post);\n    u1[field] = ev.target.value;\n    setPost(u1);\n  }\n\n  function updatePhoto(ev) {\n    let p1 = Object.assign({}, post);\n    p1[\"photo\"] = ev.target.files[0];\n    setPost(p1);\n  }\n\n  function Redirect({to, children}) {\n    return (\n      <Nav.Item>\n        <NavLink to={to} exact\n          className=\"btn font-weight-bold text-light btn-danger\"\n          activeClassName=\"active\">\n          {children}\n        </NavLink>\n      </Nav.Item>\n    );\n  }\n  let link = \"/wellness/view/\" + wellness_form.id\n\n  if(session) {\n    return(\n        <Form onSubmit={onSubmit}>\n          <Form.Group>\n            <h1 className=\"mt-5\">Edit Wellness Post</h1>\n            <Form.Label>Post Title</Form.Label>\n            <Form.Control type=\"text\"\n                          onChange={\n                            (ev) => update(\"title\", ev)}\n              value={post.title} />\n          </Form.Group>\n          <Form.Group>\n          <Form.Label>Post Body</Form.Label>\n          <Form.Control as=\"textarea\"\n                        onChange={\n                          (ev) => update(\"body\", ev)}\n            value={post.body} />\n        </Form.Group>\n        <Form.Group>\n              <Form.Label>Profile Picture</Form.Label>\n              <Form.Control type=\"file\" onChange={updatePhoto} />\n        </Form.Group>\n          <Row className=\"ml-1\">\n          <Button variant=\"primary\" type=\"submit\" className=\"h3 font-weight-bold mr-3\">\n            Save\n          </Button>\n          <Redirect to={link}>Cancel</Redirect>\n          </Row>\n        </Form>\n      );\n  }\n  else{\n    return <h1 className=\"mt-5 ml-5\">Please Login In To Edit</h1>\n  }\n}\n\nfunction state2props({user_form, session, wellness_form}) {\n  return {user_form, session, wellness_form};\n}\n\nexport default connect(state2props)(WellnessEdit);\n"]},"metadata":{},"sourceType":"module"}