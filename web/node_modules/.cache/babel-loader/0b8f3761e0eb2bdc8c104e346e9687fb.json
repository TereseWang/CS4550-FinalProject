{"ast":null,"code":"import _slicedToArray from\"/media/psf/Home/Desktop/CS4550-FinalProject/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Nav,NavRow,Row,Col,Form,Button}from'react-bootstrap';import{connect}from'react-redux';import{useState}from'react';import{useHistory,NavLink}from'react-router-dom';import pick from'lodash/pick';import store from'../store';import{create_forum,fetch_forums,fetch_users}from'../api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UserForm(_ref){var session=_ref.session;var history=useHistory();var _useState=useState({user_id:session.user_id,body:\"\",title:\"\"}),_useState2=_slicedToArray(_useState,2),post=_useState2[0],setPost=_useState2[1];function onSubmit(ev){ev.preventDefault();var data=pick(post,['user_id','title','body','photo']);create_forum(data).then(function(data){if(data.error){var action={type:\"error/set\",data:data.error};store.dispatch(action);}else{fetch_forums();fetch_users();history.push(\"/forum/list\");}});}function update(field,ev){var u1=Object.assign({},post);u1[field]=ev.target.value;setPost(u1);}function updatePhoto(ev){var p1=Object.assign({},post);p1[\"photo\"]=ev.target.files[0];setPost(p1);}function Redirect(_ref2){var to=_ref2.to,children=_ref2.children;return/*#__PURE__*/_jsx(Nav.Item,{children:/*#__PURE__*/_jsx(NavLink,{to:to,exact:true,className:\"btn font-weight-bold text-light btn-danger\",activeClassName:\"active\",children:children})});}return/*#__PURE__*/_jsxs(Form,{onSubmit:onSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mt-5\",children:\"Create Forum\"}),/*#__PURE__*/_jsx(Form.Label,{children:\"Post Title\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",onChange:function onChange(ev){return update(\"title\",ev);},value:post.title})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Forum Body\"}),/*#__PURE__*/_jsx(Form.Control,{as:\"textarea\",onChange:function onChange(ev){return update(\"body\",ev);},value:post.body})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Profile Picture\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"file\",onChange:updatePhoto})]}),/*#__PURE__*/_jsxs(Row,{className:\"ml-1\",children:[/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",className:\"h3 font-weight-bold mr-3\",children:\"Save\"}),/*#__PURE__*/_jsx(Redirect,{to:\"/forum/list\",children:\"Cancel\"})]})]});}function LoginEdit(_ref3){var session=_ref3.session;if(session){return/*#__PURE__*/_jsx(UserForm,{session:session});}else{return/*#__PURE__*/_jsx(\"h1\",{className:\"mt-5 ml-5\",children:\"Please Login In To Edit\"});}}var UpdateUserForm=connect(function(_ref4){var session=_ref4.session;return{session:session};})(LoginEdit);function ForumNew(){return/*#__PURE__*/_jsx(UpdateUserForm,{});}function state2props(_state){return{};}export default connect(state2props)(ForumNew);","map":{"version":3,"sources":["/media/psf/Home/Desktop/CS4550-FinalProject/web/src/Forum/New.js"],"names":["Nav","NavRow","Row","Col","Form","Button","connect","useState","useHistory","NavLink","pick","store","create_forum","fetch_forums","fetch_users","UserForm","session","history","user_id","body","title","post","setPost","onSubmit","ev","preventDefault","data","then","error","action","type","dispatch","push","update","field","u1","Object","assign","target","value","updatePhoto","p1","files","Redirect","to","children","LoginEdit","UpdateUserForm","ForumNew","state2props","_state"],"mappings":"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","sourcesContent":["import { Nav, NavRow, Row, Col, Form, Button } from 'react-bootstrap';\nimport { connect } from 'react-redux';\nimport { useState } from 'react';\nimport { useHistory, NavLink  } from 'react-router-dom';\nimport pick from 'lodash/pick';\nimport store from '../store';\nimport { create_forum , fetch_forums, fetch_users } from '../api';\n\nfunction UserForm({session}) {\n  let history = useHistory();\n  const [post, setPost] = useState({\n    user_id: session.user_id, body: \"\", title: \"\"\n  });\n\n  function onSubmit(ev) {\n    ev.preventDefault();\n    let data = pick(post, ['user_id', 'title', 'body', 'photo']);\n    create_forum(data).then((data) => {\n        if(data.error) {\n          let action={\n            type:\"error/set\",\n            data: data.error\n          }\n          store.dispatch(action)\n        }\n        else {\n          fetch_forums()\n          fetch_users()\n          history.push(\"/forum/list\")\n        }\n    });\n  }\n\n  function update(field, ev) {\n    let u1 = Object.assign({}, post);\n    u1[field] = ev.target.value;\n    setPost(u1);\n  }\n\n  function updatePhoto(ev) {\n    let p1 = Object.assign({}, post);\n    p1[\"photo\"] = ev.target.files[0];\n    setPost(p1);\n  }\n\n  function Redirect({to, children}) {\n    return (\n      <Nav.Item>\n        <NavLink to={to} exact\n          className=\"btn font-weight-bold text-light btn-danger\"\n          activeClassName=\"active\">\n          {children}\n        </NavLink>\n      </Nav.Item>\n    );\n  }\n\n  return(\n      <Form onSubmit={onSubmit}>\n        <Form.Group>\n          <h1 className=\"mt-5\">Create Forum</h1>\n          <Form.Label>Post Title</Form.Label>\n          <Form.Control type=\"text\"\n                        onChange={\n                          (ev) => update(\"title\", ev)}\n            value={post.title} />\n        </Form.Group>\n        <Form.Group>\n        <Form.Label>Forum Body</Form.Label>\n        <Form.Control as=\"textarea\"\n                      onChange={\n                        (ev) => update(\"body\", ev)}\n          value={post.body} />\n      </Form.Group>\n      <Form.Group>\n            <Form.Label>Profile Picture</Form.Label>\n            <Form.Control type=\"file\" onChange={updatePhoto} />\n      </Form.Group>\n        <Row className=\"ml-1\">\n        <Button variant=\"primary\" type=\"submit\" className=\"h3 font-weight-bold mr-3\">\n          Save\n        </Button>\n        <Redirect to=\"/forum/list\">Cancel</Redirect>\n        </Row>\n      </Form>\n    );\n  }\n\nfunction LoginEdit({session}) {\n  if(session) {\n    return <UserForm session={session}/>\n  }\n  else{\n    return <h1 className=\"mt-5 ml-5\">Please Login In To Edit</h1>\n  }\n}\n\nconst UpdateUserForm = connect(\n    ({session}) => ({session}))(LoginEdit);\n\nfunction ForumNew() {\n  return (\n    <UpdateUserForm/>\n  );\n}\n\nfunction state2props(_state) {\n  return {};\n}\n\nexport default connect(state2props)(ForumNew);\n"]},"metadata":{},"sourceType":"module"}