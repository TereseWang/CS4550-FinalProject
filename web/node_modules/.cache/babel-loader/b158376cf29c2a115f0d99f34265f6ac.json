{"ast":null,"code":"import _slicedToArray from\"/media/psf/Home/Desktop/CS4550-FinalProject/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Nav,NavRow,Row,Col,Form,Button}from'react-bootstrap';import{connect}from'react-redux';import{useState}from'react';import{useHistory,NavLink}from'react-router-dom';import pick from'lodash/pick';import store from'../store';import{update_user,fetch_users,api_login,fetch_reason}from'../api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UserForm(_ref){var session=_ref.session;var history=useHistory();var _useState=useState({id:session.user_id,name:session.name,email:session.email,reason:session.reason,pass1:\"\",pass2:\"\"}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];function onSubmit(ev){ev.preventDefault();var data=pick(user,['health_voted','id','name','email','password','reason','photo']);update_user(data).then(function(data){if(data.error){var action={type:\"error/set\",data:data.error};store.dispatch(action);}else{fetch_users();api_login(user['email'],user['password']);history.push(\"/users/view\");}});}function check_pass(p1,p2){if(p1!==p2){return\"Passwords don't match.\";}if(p1.length<8){return\"Password too short.\";}return\"\";}function update(field,ev){var u1=Object.assign({},user);u1[field]=ev.target.value;u1.password=u1.pass1;u1.pass_msg=check_pass(u1.pass1,u1.pass2);setUser(u1);}function updatePhoto(ev){var p1=Object.assign({},user);p1[\"photo\"]=ev.target.files[0];setUser(p1);}function Redirect(_ref2){var to=_ref2.to,children=_ref2.children;return/*#__PURE__*/_jsx(Nav.Item,{children:/*#__PURE__*/_jsx(NavLink,{to:to,exact:true,className:\"btn font-weight-bold text-light btn-danger\",activeClassName:\"active\",children:children})});}return/*#__PURE__*/_jsxs(Form,{onSubmit:onSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mt-5\",children:\"Edit Profile\"}),/*#__PURE__*/_jsx(Form.Label,{children:\"Name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",onChange:function onChange(ev){return update(\"name\",ev);},value:user.name})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",onChange:function onChange(ev){return update(\"email\",ev);},value:user.email})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"exampleForm.ControlSelect1\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Reason For Using This Website\"}),/*#__PURE__*/_jsxs(Form.Control,{as:\"select\",onChange:function onChange(ev){return update(\"reason\",ev);},value:user.reason,children:[/*#__PURE__*/_jsx(\"option\",{}),/*#__PURE__*/_jsx(\"option\",{children:\"Cat Wellness\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Breeder/Adoption\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Lost/Found Cat\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Food Choices/Recommendations\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Other\"})]})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Profile Picture\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"file\",onChange:updatePhoto})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"New Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",onChange:function onChange(ev){return update(\"pass1\",ev);},value:user.pass1}),/*#__PURE__*/_jsx(\"p\",{children:user.pass_msg})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Confirm Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",onChange:function onChange(ev){return update(\"pass2\",ev);},value:user.pass2})]}),/*#__PURE__*/_jsxs(Row,{className:\"ml-1\",children:[/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",className:\"h3 font-weight-bold mr-3\",disabled:user.pass_msg!==\"\",children:\"Save\"}),/*#__PURE__*/_jsx(Redirect,{to:\"/users/view\",children:\"Cancel\"})]})]});}function LoginEdit(_ref3){var session=_ref3.session;if(session){return/*#__PURE__*/_jsx(UserForm,{session:session});}else{return/*#__PURE__*/_jsx(\"h1\",{className:\"mt-5 ml-5\",children:\"Please Login In To Edit\"});}}var UpdateUserForm=connect(function(_ref4){var session=_ref4.session;return{session:session};})(LoginEdit);function UsersEdit(){return/*#__PURE__*/_jsx(UpdateUserForm,{});}function state2props(_state){return{};}export default connect(state2props)(UsersEdit);","map":{"version":3,"sources":["/media/psf/Home/Desktop/CS4550-FinalProject/web/src/User/Edit.js"],"names":["Nav","NavRow","Row","Col","Form","Button","connect","useState","useHistory","NavLink","pick","store","update_user","fetch_users","api_login","fetch_reason","UserForm","session","history","id","user_id","name","email","reason","pass1","pass2","user","setUser","onSubmit","ev","preventDefault","data","then","error","action","type","dispatch","push","check_pass","p1","p2","length","update","field","u1","Object","assign","target","value","password","pass_msg","updatePhoto","files","Redirect","to","children","LoginEdit","UpdateUserForm","UsersEdit","state2props","_state"],"mappings":"sKAAA,OAASA,GAAT,CAAcC,MAAd,CAAsBC,GAAtB,CAA2BC,GAA3B,CAAgCC,IAAhC,CAAsCC,MAAtC,KAAoD,iBAApD,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,QAAT,KAAyB,OAAzB,CACA,OAASC,UAAT,CAAqBC,OAArB,KAAqC,kBAArC,CACA,MAAOC,CAAAA,IAAP,KAAiB,aAAjB,CACA,MAAOC,CAAAA,KAAP,KAAkB,UAAlB,CACA,OAASC,WAAT,CAAsBC,WAAtB,CAAmCC,SAAnC,CAA8CC,YAA9C,KAAkE,QAAlE,C,wFAEA,QAASC,CAAAA,QAAT,MAA6B,IAAVC,CAAAA,OAAU,MAAVA,OAAU,CAC3B,GAAIC,CAAAA,OAAO,CAAGV,UAAU,EAAxB,CAD2B,cAEHD,QAAQ,CAAC,CAC/BY,EAAE,CAAEF,OAAO,CAACG,OADmB,CACVC,IAAI,CAAEJ,OAAO,CAACI,IADJ,CACUC,KAAK,CAAEL,OAAO,CAACK,KADzB,CAE/BC,MAAM,CAAEN,OAAO,CAACM,MAFe,CAEPC,KAAK,CAAE,EAFA,CAEIC,KAAK,CAAE,EAFX,CAAD,CAFL,wCAEpBC,IAFoB,eAEdC,OAFc,eAO3B,QAASC,CAAAA,QAAT,CAAkBC,EAAlB,CAAsB,CACpBA,EAAE,CAACC,cAAH,GACA,GAAIC,CAAAA,IAAI,CAAGrB,IAAI,CAACgB,IAAD,CAAO,CAAC,cAAD,CAAiB,IAAjB,CAAuB,MAAvB,CAA+B,OAA/B,CAAwC,UAAxC,CAAoD,QAApD,CAA8D,OAA9D,CAAP,CAAf,CACAd,WAAW,CAACmB,IAAD,CAAX,CAAkBC,IAAlB,CAAuB,SAACD,IAAD,CAAU,CAC7B,GAAGA,IAAI,CAACE,KAAR,CAAe,CACb,GAAIC,CAAAA,MAAM,CAAC,CACTC,IAAI,CAAC,WADI,CAETJ,IAAI,CAAEA,IAAI,CAACE,KAFF,CAAX,CAIAtB,KAAK,CAACyB,QAAN,CAAeF,MAAf,EACD,CAND,IAOK,CACHrB,WAAW,GACXC,SAAS,CAACY,IAAI,CAAC,OAAD,CAAL,CAAgBA,IAAI,CAAC,UAAD,CAApB,CAAT,CACAR,OAAO,CAACmB,IAAR,CAAa,aAAb,EACD,CACJ,CAbD,EAcD,CAED,QAASC,CAAAA,UAAT,CAAoBC,EAApB,CAAwBC,EAAxB,CAA4B,CAC1B,GAAID,EAAE,GAAKC,EAAX,CAAe,CACb,MAAO,wBAAP,CACD,CAED,GAAID,EAAE,CAACE,MAAH,CAAY,CAAhB,CAAmB,CACjB,MAAO,qBAAP,CACD,CAED,MAAO,EAAP,CACD,CAED,QAASC,CAAAA,MAAT,CAAgBC,KAAhB,CAAuBd,EAAvB,CAA2B,CACzB,GAAIe,CAAAA,EAAE,CAAGC,MAAM,CAACC,MAAP,CAAc,EAAd,CAAkBpB,IAAlB,CAAT,CACAkB,EAAE,CAACD,KAAD,CAAF,CAAYd,EAAE,CAACkB,MAAH,CAAUC,KAAtB,CACAJ,EAAE,CAACK,QAAH,CAAcL,EAAE,CAACpB,KAAjB,CACAoB,EAAE,CAACM,QAAH,CAAcZ,UAAU,CAACM,EAAE,CAACpB,KAAJ,CAAWoB,EAAE,CAACnB,KAAd,CAAxB,CACAE,OAAO,CAACiB,EAAD,CAAP,CACD,CAED,QAASO,CAAAA,WAAT,CAAqBtB,EAArB,CAAyB,CACvB,GAAIU,CAAAA,EAAE,CAAGM,MAAM,CAACC,MAAP,CAAc,EAAd,CAAkBpB,IAAlB,CAAT,CACAa,EAAE,CAAC,OAAD,CAAF,CAAcV,EAAE,CAACkB,MAAH,CAAUK,KAAV,CAAgB,CAAhB,CAAd,CACAzB,OAAO,CAACY,EAAD,CAAP,CACD,CAED,QAASc,CAAAA,QAAT,OAAkC,IAAfC,CAAAA,EAAe,OAAfA,EAAe,CAAXC,QAAW,OAAXA,QAAW,CAChC,mBACE,KAAC,GAAD,CAAK,IAAL,wBACE,KAAC,OAAD,EAAS,EAAE,CAAED,EAAb,CAAiB,KAAK,KAAtB,CACE,SAAS,CAAC,4CADZ,CAEE,eAAe,CAAC,QAFlB,UAGGC,QAHH,EADF,EADF,CASD,CAGD,mBACI,MAAC,IAAD,EAAM,QAAQ,CAAE3B,QAAhB,wBACE,MAAC,IAAD,CAAM,KAAN,yBACE,WAAI,SAAS,CAAC,MAAd,0BADF,cAEE,KAAC,IAAD,CAAM,KAAN,mBAFF,cAGE,KAAC,IAAD,CAAM,OAAN,EAAc,IAAI,CAAC,MAAnB,CACc,QAAQ,CACN,kBAACC,EAAD,QAAQa,CAAAA,MAAM,CAAC,MAAD,CAASb,EAAT,CAAd,EAFhB,CAGE,KAAK,CAAEH,IAAI,CAACL,IAHd,EAHF,GADF,cASE,MAAC,IAAD,CAAM,KAAN,yBACE,KAAC,IAAD,CAAM,KAAN,oBADF,cAEE,KAAC,IAAD,CAAM,OAAN,EAAc,IAAI,CAAC,MAAnB,CACc,QAAQ,CACN,kBAACQ,EAAD,QAAQa,CAAAA,MAAM,CAAC,OAAD,CAAUb,EAAV,CAAd,EAFhB,CAGE,KAAK,CAAEH,IAAI,CAACJ,KAHd,EAFF,GATF,cAiBE,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,4BAAtB,wBACE,KAAC,IAAD,CAAM,KAAN,4CADF,cAEE,MAAC,IAAD,CAAM,OAAN,EAAc,EAAE,CAAC,QAAjB,CAA0B,QAAQ,CAAE,kBAACO,EAAD,QAAQa,CAAAA,MAAM,CAAC,QAAD,CAAWb,EAAX,CAAd,EAApC,CAAkE,KAAK,CAAEH,IAAI,CAACH,MAA9E,wBACE,iBADF,cAEE,wCAFF,cAGE,4CAHF,cAIE,0CAJF,cAKE,wDALF,cAME,iCANF,GAFF,GAjBF,cA4BE,MAAC,IAAD,CAAM,KAAN,yBACM,KAAC,IAAD,CAAM,KAAN,8BADN,cAEM,KAAC,IAAD,CAAM,OAAN,EAAc,IAAI,CAAC,MAAnB,CAA0B,QAAQ,CAAE4B,WAApC,EAFN,GA5BF,cAgCE,MAAC,IAAD,CAAM,KAAN,yBACE,KAAC,IAAD,CAAM,KAAN,2BADF,cAEE,KAAC,IAAD,CAAM,OAAN,EAAc,IAAI,CAAC,UAAnB,CACE,QAAQ,CACN,kBAACtB,EAAD,QAAQa,CAAAA,MAAM,CAAC,OAAD,CAAUb,EAAV,CAAd,EAFJ,CAGE,KAAK,CAAEH,IAAI,CAACF,KAHd,EAFF,cAME,mBAAIE,IAAI,CAACwB,QAAT,EANF,GAhCF,cAwCE,MAAC,IAAD,CAAM,KAAN,yBACE,KAAC,IAAD,CAAM,KAAN,+BADF,cAEE,KAAC,IAAD,CAAM,OAAN,EAAc,IAAI,CAAC,UAAnB,CACE,QAAQ,CACN,kBAACrB,EAAD,QAAQa,CAAAA,MAAM,CAAC,OAAD,CAAUb,EAAV,CAAd,EAFJ,CAGE,KAAK,CAAEH,IAAI,CAACD,KAHd,EAFF,GAxCF,cA+CE,MAAC,GAAD,EAAK,SAAS,CAAC,MAAf,wBACA,KAAC,MAAD,EAAQ,OAAO,CAAC,SAAhB,CAA0B,IAAI,CAAC,QAA/B,CAAwC,SAAS,CAAC,0BAAlD,CACQ,QAAQ,CAAEC,IAAI,CAACwB,QAAL,GAAkB,EADpC,kBADA,cAKA,KAAC,QAAD,EAAU,EAAE,CAAC,aAAb,oBALA,GA/CF,GADJ,CAyDC,CAEH,QAASM,CAAAA,SAAT,OAA8B,IAAVvC,CAAAA,OAAU,OAAVA,OAAU,CAC5B,GAAGA,OAAH,CAAY,CACV,mBAAO,KAAC,QAAD,EAAU,OAAO,CAAEA,OAAnB,EAAP,CACD,CAFD,IAGI,CACF,mBAAO,WAAI,SAAS,CAAC,WAAd,qCAAP,CACD,CACF,CAED,GAAMwC,CAAAA,cAAc,CAAGnD,OAAO,CAC1B,mBAAEW,CAAAA,OAAF,OAAEA,OAAF,OAAgB,CAACA,OAAO,CAAPA,OAAD,CAAhB,EAD0B,CAAP,CACSuC,SADT,CAAvB,CAGA,QAASE,CAAAA,SAAT,EAAqB,CACnB,mBACE,KAAC,cAAD,IADF,CAGD,CAED,QAASC,CAAAA,WAAT,CAAqBC,MAArB,CAA6B,CAC3B,MAAO,EAAP,CACD,CAED,cAAetD,CAAAA,OAAO,CAACqD,WAAD,CAAP,CAAqBD,SAArB,CAAf","sourcesContent":["import { Nav, NavRow, Row, Col, Form, Button } from 'react-bootstrap';\nimport { connect } from 'react-redux';\nimport { useState } from 'react';\nimport { useHistory, NavLink  } from 'react-router-dom';\nimport pick from 'lodash/pick';\nimport store from '../store';\nimport { update_user, fetch_users, api_login, fetch_reason } from '../api';\n\nfunction UserForm({session}) {\n  let history = useHistory();\n  const [user, setUser] = useState({\n    id: session.user_id, name: session.name, email: session.email,\n    reason: session.reason, pass1: \"\", pass2: \"\",\n  });\n\n  function onSubmit(ev) {\n    ev.preventDefault();\n    let data = pick(user, ['health_voted', 'id', 'name', 'email', 'password', 'reason', 'photo']);\n    update_user(data).then((data) => {\n        if(data.error) {\n          let action={\n            type:\"error/set\",\n            data: data.error\n          }\n          store.dispatch(action)\n        }\n        else {\n          fetch_users();\n          api_login(user['email'], user['password'])\n          history.push(\"/users/view\")\n        }\n    });\n  }\n\n  function check_pass(p1, p2) {\n    if (p1 !== p2) {\n      return \"Passwords don't match.\";\n    }\n\n    if (p1.length < 8) {\n      return \"Password too short.\";\n    }\n\n    return \"\";\n  }\n\n  function update(field, ev) {\n    let u1 = Object.assign({}, user);\n    u1[field] = ev.target.value;\n    u1.password = u1.pass1;\n    u1.pass_msg = check_pass(u1.pass1, u1.pass2);\n    setUser(u1);\n  }\n\n  function updatePhoto(ev) {\n    let p1 = Object.assign({}, user);\n    p1[\"photo\"] = ev.target.files[0];\n    setUser(p1);\n  }\n\n  function Redirect({to, children}) {\n    return (\n      <Nav.Item>\n        <NavLink to={to} exact\n          className=\"btn font-weight-bold text-light btn-danger\"\n          activeClassName=\"active\">\n          {children}\n        </NavLink>\n      </Nav.Item>\n    );\n  }\n\n\n  return(\n      <Form onSubmit={onSubmit}>\n        <Form.Group>\n          <h1 className=\"mt-5\">Edit Profile</h1>\n          <Form.Label>Name</Form.Label>\n          <Form.Control type=\"text\"\n                        onChange={\n                          (ev) => update(\"name\", ev)}\n            value={user.name} />\n        </Form.Group>\n        <Form.Group>\n          <Form.Label>Email</Form.Label>\n          <Form.Control type=\"text\"\n                        onChange={\n                          (ev) => update(\"email\", ev)}\n            value={user.email} />\n        </Form.Group>\n\n        <Form.Group controlId=\"exampleForm.ControlSelect1\">\n          <Form.Label>Reason For Using This Website</Form.Label>\n          <Form.Control as=\"select\" onChange={(ev) => update(\"reason\", ev)} value={user.reason}>\n            <option></option>\n            <option>Cat Wellness</option>\n            <option>Breeder/Adoption</option>\n            <option>Lost/Found Cat</option>\n            <option>Food Choices/Recommendations</option>\n            <option>Other</option>\n          </Form.Control>\n        </Form.Group>\n        <Form.Group>\n              <Form.Label>Profile Picture</Form.Label>\n              <Form.Control type=\"file\" onChange={updatePhoto} />\n        </Form.Group>\n        <Form.Group>\n          <Form.Label>New Password</Form.Label>\n          <Form.Control type=\"password\"\n            onChange={\n              (ev) => update(\"pass1\", ev)}\n            value={user.pass1} />\n          <p>{user.pass_msg}</p>\n        </Form.Group>\n        <Form.Group>\n          <Form.Label>Confirm Password</Form.Label>\n          <Form.Control type=\"password\"\n            onChange={\n              (ev) => update(\"pass2\", ev)}\n            value={user.pass2} />\n        </Form.Group>\n        <Row className=\"ml-1\">\n        <Button variant=\"primary\" type=\"submit\" className=\"h3 font-weight-bold mr-3\"\n                disabled={user.pass_msg !== \"\"}>\n          Save\n        </Button>\n        <Redirect to=\"/users/view\">Cancel</Redirect>\n        </Row>\n      </Form>\n    );\n  }\n\nfunction LoginEdit({session}) {\n  if(session) {\n    return <UserForm session={session}/>\n  }\n  else{\n    return <h1 className=\"mt-5 ml-5\">Please Login In To Edit</h1>\n  }\n}\n\nconst UpdateUserForm = connect(\n    ({session}) => ({session}))(LoginEdit);\n\nfunction UsersEdit() {\n  return (\n    <UpdateUserForm/>\n  );\n}\n\nfunction state2props(_state) {\n  return {};\n}\n\nexport default connect(state2props)(UsersEdit);\n"]},"metadata":{},"sourceType":"module"}